<h1><%= @user.name %></h1>
<br/>
<p><a href="/users/<%= @user.id %>/posts/">Create new blog post</a></p>
<br/>

<h3>Posts</h3>
  <% @user.posts.each do |post| %>
    <span class="post-content"><%= simple_format(post.content) %>
    <a id="delete" href="/posts/<%= post.id %>"
  data-confirm="Are you sure you want to delete this post?"
  data-method="delete"
  rel="nofollow"> [Delete Post]</a></span>
  <% end %>
  <br />

<h3>Friends</h3>
  <ul>
  <% @user.friends.each do |friend| %>
  <li><a href="/users/<%= friend.id %>"><%= friend.name %></a>
    <% friendship = Friendship.find_by(:friend_id => friend.id, :user_id => @user.id) %>
    <a id="delete" href="/friendships/<%= friendship.id %>"
  data-confirm="Are you sure you want to stop being friends with <%= friend.name%>?"
  data-method="delete"
  rel="nofollow"> [X]</a>
  </li>
  <% end %>
  </ul>

<br/>
<br/>
<br/>
<br/>
<form action="/friendships/" method="post">
  <input name ="friendships[user_id]" type="hidden" value="<%= @user.id %>">
  <select name="friendships[friend_id]">
    <option selected disabled>Choose Friend</option>
    <% Friend.all.each do |friend| %>
      <% if friend.id != @user.id && !@user.friends.include?(friend)%>
        <option value="<%=friend.id%>"><%= friend.name %></option>
      <% end %>
    <% end %>
  </select>
  <button>Add Friend</button>
</form>
<br/>
<br/>
<form action="/users/<%= @user.id %>" method="post">
  <label for="user_name">Edit Name: </label>
  <input name="_method" type="hidden" value="patch">
  <%= render("form") %>
  <button>Update!</button>
</form>
<br/>
<br/>
<p><a href="/users/">Return to main menu</a></p>
<br/>
<p><a href="/users/<%= @user.id %>"
  data-confirm="Are you sure?"
  data-method="delete"
  rel="nofollow">Delete <%= @user.name %></a>
</p>
